Lab Notebook – Automatic Vinyl Record Flipper
Project Member: Riyaan Jain
Project Start Date: January 2025
Notebook Last Updated: May 09, 2025

Project Description:
This project aims to develop a fully automatic system for flipping a vinyl record once playback is complete. The system detects the end of the record using a Hall effect sensor placed near the tonearm's resting position, lifts and repositions the tonearm, flips the vinyl using a motorized clamp and rotation mechanism, and replays the other side. The project involves schematic design, PCB development, servo control, sensor interfacing, and firmware implementation on an ESP32 microcontroller.

--------------------------------------------------
WEEKLY LOG AND DESIGN PROCESS

Week 1–2: Ideation & Planning
- Researched record player anatomy and existing manual flipping mechanisms.
- Defined functional goals: end-of-playback detection, tonearm control, flip mechanism, and restart automation.
- Proposed 3 mechanical concepts: robotic arm lifter, rotating tray, and flipping claw. Chose flipping claw due to compactness.
- Components selected: ESP32 (PWM + Wi-Fi), MG996R servos, SS49E linear Hall effect sensor.
- Verified magnetic field strength from tonearm magnet using gaussmeter: ~80 G at ~1 inch.

Week 3–4: Schematic & PCB Design
- Designed 2-layer PCB in KiCad.
- Key blocks: voltage regulation (AMS1117 5V and 3.3V), reverse protection diode, MOSFET motor control, servo headers, sensor inputs.
- Power tolerance analysis:
    - Servos draw up to 2.1 A combined.
    - Voltage droop simulated using LTspice: Vmin = 4.91 V under full load (acceptable for 5V logic).
    - Decoupling capacitors: 100 μF bulk + 0.1 μF ceramic per servo.
- Trace width calculations:
    - Used IPC-2221 standard.
    - For 2 A over 2 oz copper, trace width = 72 mils (applied 80 mils for margin).
- Schematics included voltage regulators, ESP32 pinouts, and sensor conditioning circuit.
- TA Check: Suggested repositioning large caps away from GPIOs.

Week 5–6: Assembly & Prototyping
- Soldered all surface-mount and through-hole components.
- Measured power stability:
    - Sampled Vout over 20 seconds every second.
    - Mean = 4.94 V, Std Dev = 0.02 V.
- Built 3D-printed housing to mount servos and flipping arms.
- Implemented tonearm lift using controlled 0° to 180° servo sweep.
- Tested Hall sensor analog values with ADC:
    - Threshold at 1.65 V indicated tonearm within range.

Week 7–8: Firmware Development
- Arduino framework used for fast deployment.
- Implemented:
    - Hall sensor interrupt.
    - Servo sweeping with acceleration smoothing.
    - State machine with IDLE → LIFT → ROTATE → LOWER → RESET.
- TA feedback: Add debounce and position confirmation step.
- Added logging to serial monitor for debugging transitions.

Week 9–10: Full System Testing
- Ran flipping cycle test 50 times:
    - 100% success in motion, 92% accuracy in tonearm detection.
- Partner Summary:
    - Aaron assisted in mechanical tuning and servo housing redesign.
- Plotted timing diagram of full sequence (attached in Graphs section).
- Finalized wiring and PCB mounting in enclosure.
- Stress test:
    - Flipping a 200 g record (max spec) repeatedly, no motor slip.
    - No thermal shutdown observed over 10-minute cycle.

Week 11: Final Adjustments
- Added tonearm rest confirmation via ADC range validation.
- Adjusted flip angle to 170° for smoother transition.
- Documented failure cases (magnet misalignment, low voltage).
- All requirements met: voltage stable, current supported, weight sustained.

--------------------------------------------------
DESIGN CALCULATIONS & EQUATIONS

1. Servo Torque Analysis:
    - Record mass ≈ 0.18 kg, radius ≈ 0.15 m
    - Moment = m * g * r = 0.18 * 9.81 * 0.15 ≈ 0.265 Nm
    - MG996R rated stall torque = 1.0 Nm → meets requirement with 3.77x margin.

2. Voltage Regulator Dropout:
    - AMS1117 min dropout = 1.2 V
    - 5V line powered by lab supply set to 6.3 V → sufficient headroom

3. Hall Sensor Threshold:
    - Sensor output range = 0.88 V (min) to 2.4 V (max)
    - Chosen threshold = 1.65 V (centered for detection symmetry)

4. PWM Timing (Arduino ESP32):
    - Frequency = 50 Hz
    - Pulse width range: 500 µs (0°) to 2500 µs (180°)
    - Duty cycle resolution: 16-bit timer @ 80 MHz

--------------------------------------------------
GRAPHS / FIGURES / DIAGRAMS

1. [ ] Timing diagram of full automation cycle (flip start to tonearm reset)
2. [ ] Voltage stability plot: 5V supply during servo load (20s sampling)
3. [ ] PCB layout with labeled blocks
4. [ ] State machine diagram (drawn in draw.io)
5. [ ] Pseudocode block for main control loop

--------------------------------------------------
NEXT STEPS

- Add soft-start ramp to servo for smoother initial motion.
- Explore battery-powered variant with buck-boost converter.
- Publish code and design files as open-source GitHub release.

--------------------------------------------------
NOTE: All blank pages marked, signed, and left unused. No non-project content included.
